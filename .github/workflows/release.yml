# name: Release

# on: 
#   push:
#     branches: [main]
  

# jobs:
#   Release:
#     runs-on: ubuntu-latest
#     steps:
#       - uses: actions/checkout@v3
#         with:
#           fetch-depth: 0
#       - name: Release tagging
#         id: versioning
#         uses: PaulHatch/semantic-version@v4.0.2
#         with:
#           branch: main
#           tag_prefix: "v"
#           major_pattern: "BREAKING CHANGES"
#           minor_pattern: "feat:"
#           format: "v${major}.${minor}.${patch}"
      
#       - name: Create Release
#         if: ${{ !startsWith(github.ref, 'refs/tags') }}
#         uses: actions/create-release@v1
#         env:
#           GITHUB_TOKEN: ${{ secrets.github_token}}
#         with:
#           tag_name: ${{ steps.versioning.outputs.version }}
#           release_name: ${{ steps.versioning.outputs.version }}
#           prerelease: false
#------------------------------------------------------------
# name: release
# on:
#   push:
#     branches:
#       - main
#   pull_request:
#     types:
#       - labeled

# jobs:
#   release:
#     runs-on: ubuntu-latest
#     steps:
#       - uses: actions/checkout@v2
#       # Bump version on merging Pull Requests with specific labels.
#       # (bump:major,bump:minor,bump:patch)
#       - uses: haya14busa/action-bumpr@v1
on:
  push:
    branches:
      - main

jobs:
  release-on-push:
    runs-on: ubuntu-latest
    env:
      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
    steps:
      - name:
        uses: rymndhng/release-on-push-action@master
        with:
          bump_version_scheme: minor
          use_github_release_notes: true
      
      - name: Release tagging
        id: versioning
        uses: PaulHatch/semantic-version@v4.0.2
        with:
          branch: main
          tag_prefix: "v"
          major_pattern: "BREAKING CHANGES"
          minor_pattern: "feat:"
          format: "v${major}.${minor}.${patch}"

  # tag:
  #   runs-on: ubuntu-latest
  #   steps:
  #     - uses: actions/checkout@v3
  #       with:
  #         fetch-depth: 0
  #     - name: Release tagging
  #       id: versioning
  #       uses: PaulHatch/semantic-version@v4.0.2
  #       with:
  #         branch: main
  #         tag_prefix: "v"
  #         major_pattern: "BREAKING CHANGES"
  #         minor_pattern: "feat:"
  #         format: "v${major}.${minor}.${patch}"
